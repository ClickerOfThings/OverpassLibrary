# Overpass Library
Overpass Library является библиотекой для извлечения данных о городах и местах в конкретном городе, используя API сайта [openstreetmap.ru](https://openstreetmap.ru/) и [Nominatim API](https://nominatim.org/).

## Зависимости
Overpass Library использует фреймворк .NET Core и библиотеку Json.NET.

## Использование
### Найти список городов по названию:
Обычный поиск города:
```c#
// Находим список городов с названием "Ульяновск"
// (возвращается список, поскольку могут существовать два города с одинаковыми названиями).
List<OsmClass> foundCities = OverpassMethods.GetCityInfo("Ульяновск");
OsmClass city = foundCities.First(); // Возвращаем первый объект из списка
```
Поиск города, название которого совпадает с другими городами:
```c#
// Находим список городов с названием "Москва"
// (возвращается список, поскольку могут существовать два города с одинаковыми названиями).
List<OsmClass> foundCities = OverpassMethods.GetCityInfo("Москва");

// Метод вернёт несколько объектов OsmClass в списке, поскольку 
// в базе данных openstreetmap.ru есть несколько городов и деревень 
// с названием "Москва".

// Возвращаем столицу России - по переменной state (столица находится в субъекте
// "Москва", openstreetmap.ru возвращает название субъекта в переменной state).
OsmClass moscow = foundCities.First(city => city.State == "Москва");
```
Метод находит города при помощи Nominatim API.

### Найти все места в прямоугольнике:
```c#
// Выбираем прямоугольник, в котором будут искаться необходимые места.
// Прямоугольник можно выбрать двумя способами: либо вручную указать 
// северо-восточную и юго-западную точки, обозначающие границы прямоугольника,
// либо сначала найти объект города, и из него извлечь его границы.

// Указываем прямоугольник вручную.
PointF northEastPoint = new PointF(55.9577717f, 37.9674277f); // северо-восточная точка
PointF southWestPoint = new PointF(55.4913076f, 37.290502f); // юго-западная точка
// Данный прямоугольник будет охватывать Москву.

// Находим границы прямоугольника по городу.
// Извлекаем объект класса OsmClass города Москвы, столицы России.
OsmClass foundCity = OverpassMethods.GetCityInfo("Москва").First();
// Извлекаем из найденного объекта северо-восточную и юго-западные точки.
PointF northEastPoint = foundCity.CityNorthEast; // северо-восточная точка
PointF southWestPoint = foundCity.CitySouthWest; // юго-западная точка


// Выбираем типы мест, которые будут искаться.
// Типы мест должны поддерживаться API сайта openstreetmap.ru, 
// полный список поддерживаемых тегов указаны в константе OverpassConsts.ALL_PLACES.
// Типы мест можно указать либо вручную при помощи массива со строками, 
// либо при помощи одной из констант класса OverpassConsts.

// Выбор типов мест вручную.
string[] placesTypes = new string[] 
{
    "school", "shop", "kiosk"
};
// API вернёт все школы, магазины и киоски.

// Выбор типов мест при помощи констант.
// Все виды мест, поддерживаемые openstreetmap.ru.
string[] placesTypes = OverpassConsts.ALL_PLACES;
// Основные виды мест (в основном коммерческие и муниципальные места,
// где работают люди).
string[] placesTypes = OverpassConsts.MAIN_PLACES;


// Производим поиск мест по выше заданным переменным.
List<OsmClass> foundPlaces = 
    OverpassMethods.GetAllPlacesInBox(northEastPoint, southWestPoint, placesTypes);
```
Метод найдёт все места в прямоугольнике с определённым типом при помощи API сайта openstreetmap.ru.

---

По техническим причинам, API сайта openstreetmap.ru не может вернуть более 1000 точек за один запрос.